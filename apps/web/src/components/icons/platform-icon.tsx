/**
 * Maps platform names to their SVG icons.
 *
 * Uses inline SVGs extracted from the existing codebase
 * (`lib/verification/github.ts`, `lib/verification/npm.ts`,
 * `lib/verification/docker.ts`, and `site-nav.tsx`) plus
 * the custom `RadicleIcon` and a generic Gitea icon.
 *
 * @param platform  - Lowercase platform identifier (e.g. `"github"`, `"radicle"`).
 * @param size      - Icon width/height in pixels (default 20).
 * @param className - Optional CSS class for colour/layout overrides.
 *
 * @example
 * <PlatformIcon platform="github" size={24} className="text-white" />
 */

import { RadicleIcon } from './radicle';

function GitHubIcon({ size = 20, className }: { size?: number; className?: string }) {
  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 16 16"
      fill="currentColor"
      className={className}
      aria-hidden="true"
    >
      <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
    </svg>
  );
}

function GitLabIcon({ size = 20, className }: { size?: number; className?: string }) {
  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 24 24"
      fill="currentColor"
      className={className}
      aria-hidden="true"
    >
      <path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 01-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 014.82 2a.43.43 0 01.58 0 .42.42 0 01.11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0118.6 2a.43.43 0 01.58 0 .42.42 0 01.11.18l2.44 7.51L23 13.45a.84.84 0 01-.35.94z" />
    </svg>
  );
}

function GiteaIcon({ size = 20, className }: { size?: number; className?: string }) {
  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 24 24"
      fill="currentColor"
      className={className}
      aria-hidden="true"
    >
      <path d="M4.209 4.603c-.247 0-.525.02-.84.088-.333.07-1.28.283-2.054 1.027C.61 6.412.394 7.3.394 7.3s.56.86 2.086 1.024c.393.042.764.043 1.106.003 0 0-.087.478-.108 1.16-.024.753-.006 1.805.277 2.806A6.24 6.24 0 005.6 14.705c.347.347.442.356.59.356.147 0 .32-.01.465-.174a.63.63 0 00.119-.382c-.068-.63-.217-1.166-.217-1.166.092-.166.4-.354.4-.354l.133-.002c.218-.002.554-.006.94-.041.528-.048 1.133-.178 1.713-.516l.043-.028a.99.99 0 00.405-.536c.07-.245.076-.498.076-.498-.037.015-.226.17-.226.17-.037.037-.09.087-.157.13-.12.076-.277.16-.455.196a1.94 1.94 0 01-.462.036c-.305-.006-.572-.072-.572-.072l-.128-.024-.128-.024a3.56 3.56 0 00-.174-.02 3.56 3.56 0 01-.172-.018c-.22-.022-.37-.048-.37-.048-.26-.02-.41-.03-.47-.06.014-.05.087-.1.132-.125.024-.014.048-.024.067-.03.03-.01.05-.012.058-.01.164.044.357.076.573.078.318.003.558-.068.558-.068.26-.09.435-.232.435-.232s-.127-.377-.383-.565c-.256-.189-.437-.234-.658-.263a3.58 3.58 0 00-.535-.019c-.346.01-.67.076-.67.076-.087.013-.166.015-.247.024 0 0-.127.013-.22-.047a.53.53 0 01-.22-.434c0-.07.007-.157.007-.157s.025-.214.087-.495c.065-.292.162-.667.312-1.09.316-.892.862-1.967 1.718-3.032A9.7 9.7 0 018.637 4.69c.37-.35.789-.665 1.24-.93A6.63 6.63 0 0112.2 3.16c.572-.07 1.168-.07 1.168-.07.587 0 1.234.045 1.895.191.662.146 1.16.39 1.683.673.523.283.929.606 1.318 1.023.44.473.77.95 1.06 1.477.368.67.554 1.27.554 1.27s-.26-.074-.538.004c-.273.076-.482.27-.58.413a.98.98 0 00-.127.563c.025.448.197.796.197.796s-.098.065-.133.259c-.031.174.024.408.125.57 0 0-.17.254-.17.61 0 .356.124.708.124.708s-.138.258-.138.582c0 .264.068.486.169.65.101.164.228.265.228.265s.088.14.088.443c0 .303-.06.616-.06.616s.134.092.288.26c.154.17.26.37.26.37s.157-.094.362-.094c.205 0 .402.097.402.097.065-.174.127-.43.127-.43s.186.03.386.03c.2 0 .374-.053.374-.053s.088.16.303.16c.136 0 .298-.074.298-.074s.103.244.263.244c.161 0 .254-.144.254-.144s.177.144.408.144c.232 0 .475-.245.475-.245.027-.188-.018-.336-.138-.417a.95.95 0 00-.452-.14s.013-.177-.077-.37c-.09-.193-.174-.286-.174-.286s.133-.39.064-.76c-.07-.371-.24-.51-.24-.51s.19-.293.16-.717c-.03-.424-.207-.589-.207-.589s.242-.452.141-.977c-.1-.525-.364-.652-.364-.652-.011-.068-.007-.168.015-.272.023-.104.073-.22.073-.22s-.31.004-.625.267A2.7 2.7 0 0019.37 6.7c-.063-.278-.176-.596-.36-.922-.185-.326-.454-.618-.454-.618s.007-.196-.107-.412a1.74 1.74 0 00-.39-.45s.135-.41.066-.855c-.069-.445-.256-.661-.256-.661s.157-.427.035-.892c-.122-.465-.38-.626-.38-.626s.165-.316.097-.703c-.068-.387-.253-.578-.388-.653A4.97 4.97 0 0016.02.99c-.385-.1-.788-.16-1.2-.178-.824-.037-1.73.082-2.63.38C11.124 1.495 10.2 2 9.395 2.637A11.03 11.03 0 007.11 4.987C6.685 5.6 6.327 6.21 6.04 6.746c-.287.536-.498.989-.63 1.31-.132.32-.173.465-.173.465s-.068-.03-.225.027a.757.757 0 00-.336.27s-.07-.184-.298-.34a1.07 1.07 0 00-.565-.158c-.168 0-.293.024-.293.024s.058-.12.033-.257c-.025-.138-.08-.242-.08-.242s-.114.075-.24.1a.875.875 0 01-.293.01s.035-.154-.035-.335c-.072-.181-.159-.282-.159-.282s-.094.067-.21.086a.91.91 0 01-.248.003z" />
    </svg>
  );
}

function NpmIcon({ size = 20, className }: { size?: number; className?: string }) {
  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 24 24"
      fill="currentColor"
      className={className}
      aria-hidden="true"
    >
      <path d="M0 7.334v8h6.666v1.332H12v-1.332h12v-8H0zm6.666 6.664H5.334v-4H3.999v4H1.335V8.667h5.331v5.331zm4 0v1.336H8.001V8.667h5.334v5.332h-2.669zm12.001 0h-1.33v-4h-1.336v4h-1.335v-4h-1.33v4h-2.671V8.667h8.002v5.331zM10.665 10H12v2.667h-1.335V10z" />
    </svg>
  );
}

type PlatformIconProps = {
  platform: string;
  size?: number;
  className?: string;
};

const ICONS: Record<string, (props: { size?: number; className?: string }) => React.ReactNode> = {
  github: GitHubIcon,
  gitlab: GitLabIcon,
  gitea: GiteaIcon,
  radicle: RadicleIcon,
  npm: NpmIcon,
};

export function PlatformIcon({ platform, size = 20, className }: PlatformIconProps) {
  const Icon = ICONS[platform.toLowerCase()];
  if (!Icon) return null;
  return <>{Icon({ size, className })}</>;
}
