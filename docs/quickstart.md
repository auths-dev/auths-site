# Quickstart: Dogfooding Auths Artifact Verification

This guide walks through verifying a file entirely within the browser using a signature generated by your local `auths` CLI. This proves the end-to-end interoperability between your Rust CLI, the decentralized Git-based trust registry, and the Next.js WASM engine.

---

## How It Works (The Zero-Trust Flow)

1. You sign a file locally using the `auths` CLI and your hardware-backed device keys.
2. You drop the file and the detached signature into the browser.
3. You provide the repository URL where your Auths identity is published.
4. The Next.js frontend resolves your Key Event Log (KEL) directly from the Git forge and extracts your active device keys. 
5. The WebAssembly engine (`auths_verifier_bg.wasm`) hashes the file locally and verifies the signature against the authorized device key. The file never leaves your machine.

---

## Step 1: Create a Dummy Artifact

Open your terminal and create a simple test file:

```bash
echo "console.log('Zero Trust');" > test-package.js
```

---

## Step 2: Sign the Artifact with Auths

Use your actual product to generate the signature. You must specify the alias of the device key you want to sign with (e.g., the one you created during initialization).

```bash
# If you don't remember your device alias, list them:
# auths device list

# Sign the artifact using your specific device key
auths sign test-package.js --device-key-alias main
```

This command securely signs the SHA-256 digest of the file using your local device's private key. It generates a detached signature file in the same directory: `test-package.js.sig`.

*(Note: If you haven't initialized an identity and published it to a repository yet, run `auths init` first).*

---

## Step 3: Get Your Repository URL

To verify the signature, the frontend needs to understand your decentralized trust chain. Instead of a raw public key, it uses the repository where your identity is hosted.

Ensure your identity is published, and grab the URL of that repository (e.g., `github.com/auths-dev/auths`).

---

## Step 4: Verify in the Hero UI

1. Open the site (`pnpm dev` → `localhost:3000`).
2. **Drop the Artifact:** Drag and drop `test-package.js` onto the terminal drop zone. The UI will instantly hash it locally and display the SHA-256 digest.
3. **Drop the Signature:** Drag and drop `test-package.js.sig` directly onto the signature input field (the UI automatically reads the hex from the binary `.sig` file).
4. **Provide the Repository:** Paste your repository URL (e.g., `github.com/username/repo`) into the input field.
5. **Click "verify via WASM →"**

The frontend will ping the Git forge, loop through your active authorized devices, and execute the WASM verification. You should instantly see:

```text
> ✓  SIGNATURE VERIFIED
> Signed by authorized device: did:key:z6Mk...
> Cryptographic proof established. No central server involved.
```

The terminal UI locks into place and the border glows emerald, proving your local device key successfully authorized the artifact via the decentralized registry.
